Generate a detailed flowchart of GitHub Actions workflows integration for DACPAC Deployment for Workpapers DB. The structure includes four workflows with nested calls and job dependencies.

ğŸ§© Workflow: .github/workflows/workpapers_db.yml (Main Entry Point)
- Triggered by:
  - workflow_dispatch (manual input: release-number)
  - pull_request changes to this file
- Calls:
  - Job: deploy-uat â¡ï¸ calls `dacpac_workflow.yml` with environment=test
  - Job: approval-prod-env â¡ï¸ calls `approval.yml` (manual gate for production)
  - Job: deploy-prod â¡ï¸ calls `dacpac_workflow.yml` with environment=production

ğŸ“¦ Workflow: .github/workflows/dacpac_workflow.yml (Reusable Deployment Orchestration)
- Triggered by: `workflow_call` from workpapers_db.yml
- Calls:
  - Job: dacpac-deploy-report â¡ï¸ calls `deploy_dacpac.yml` with action=DeployReport
  - Job: dacpac-deploy-script â¡ï¸ calls `deploy_dacpac.yml` with action=Script
  - Job: dacpac-publish â¡ï¸ calls `deploy_dacpac.yml` with action=Publish
  - Job: approval (conditional) â¡ï¸ calls `approval.yml` for manual intervention
- Job Execution Sequence:
  1. start-deploy-track
  2. download-packages
  3. prepare-matrix-list
  4. setup-db-user
  5. dacpac-deploy-report (â†’ deploy_dacpac.yml)
  6. dacpac-deploy-script (â†’ deploy_dacpac.yml)
  7. notify-start (Slack start)
  8. approval (â†’ approval.yml) [only if approval-environment is set]
  9. dacpac-publish (â†’ deploy_dacpac.yml)
 10. cleanup-db-user
 11. notify (Slack + DeployTrack end)

ğŸ› ï¸ Workflow: .github/workflows/deploy_dacpac.yml (Performs DACPAC Operation)
- Triggered by: dacpac_workflow.yml
- Purpose: Executes SQL DACPAC action (DeployReport, Script, Publish)
- Steps:
  - OIDC role assumption
  - Download artifacts
  - Perform DACPAC Action via sql-dacpac-deployer
  - Upload output (for DeployReport/Script)
  - Post New Relic event if action=Publish

ğŸ›‘ Workflow: .github/workflows/approval.yml (Reusable Manual Approval)
- Triggered by:
  - workpapers_db.yml â¡ï¸ approval-prod-env
  - dacpac_workflow.yml â¡ï¸ approval
- Contains:
  - Single job: approval (manual review before continuing)

ğŸ§­ Flowchart Integration Tree:
workpapers_db.yml
â”œâ”€â”€ deploy-uat
â”‚   â””â”€â”€ calls dacpac_workflow.yml (test)
â”‚       â”œâ”€â”€ dacpac-deploy-report â”€â”€â–¶ deploy_dacpac.yml (DeployReport)
â”‚       â”œâ”€â”€ dacpac-deploy-script â”€â”€â–¶ deploy_dacpac.yml (Script)
â”‚       â””â”€â”€ dacpac-publish â”€â”€â”€â”€â”€â”€â”€â”€â–¶ deploy_dacpac.yml (Publish)
â”‚
â”œâ”€â”€ approval-prod-env
â”‚   â””â”€â”€ calls approval.yml
â”‚
â””â”€â”€ deploy-prod
    â””â”€â”€ calls dacpac_workflow.yml (production)
        â”œâ”€â”€ same steps as above
        â””â”€â”€ approval â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ approval.yml

ğŸ”” Notifications:
- notify-start and notify jobs send Slack updates
- DeployTrack integration runs at start and end of dacpac_workflow

ğŸ“¥ Inputs passed: release-number, runner-region, project-name, af-path, destination-path
ğŸ“¤ Outputs chained across jobs using `outputs:` and `needs:` pattern

Highlight all reusable workflow calls (`uses: ./.github/workflows/...`) and show environment-specific flows separately.

